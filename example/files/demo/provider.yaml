# yaml-language-server: $schema=.fluence/schemas/provider.json

# Defines config used for provider set up

# Documentation: https://github.com/fluencelabs/cli/tree/main/docs/configs/provider.md

env: local

computePeers:
  nox-0:
    computeUnits: 32
    nox:
      rawConfig: |
        local = true
  nox-1:
    computeUnits: 32
  nox-2:
    computeUnits: 32

offers:
  offer:
    maxCollateralPerWorker: 1
    minPricePerWorkerEpoch: 0.00001
    computePeers:
      - nox-0
      - nox-1
      - nox-2

nox:
  # you can write config overrides with yaml syntax using camelCase
  systemServices:
    enable:
      - aqua-apfs
      - decider

  # or you can write config in toml
  # some options can be set only with rawConfig
  # this has highest priority when merging
  rawConfig: |
    allowed_binaries = [
      "/usr/bin/curl",
      # we need to set path to ipfs binary that was downloaded by role
      "{{ nox_dir }}/ipfs",
    ]

    local = false
    bootstrap_nodes = [
      "/ip4/172.30.10.10/tcp/7771"
    ]

    [system_services.aqua_ipfs]
    ipfs_binary_path = "{{ nox_dir }}/ipfs"
    external_api_multiaddr = "/ip4/127.0.0.1/tcp/5001"
    local_api_multiaddr = "/ip4/172.30.10.95/tcp/5001"

    [system_services.decider]
    decider_period_sec = 10
    worker_ipfs_multiaddr = "/ip4/172.30.10.95/tcp/5001"
    network_api_endpoint = "http://172.30.10.85:8545"
    network_id = 31337
    start_block = "earliest"
    matcher_address = "0x0e1F3B362E22B2Dc82C9E35d6e62998C7E8e2349"
    wallet_key = "0x3cc23e0227bd17ea5d6ea9d42b5eaa53ad41b1974de4755c79fe236d361a6fd5"
